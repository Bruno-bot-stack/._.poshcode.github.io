<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Sign up for PowerShell.Slack.com">
    <meta name="author" content="Justin Dearing">
    <title>init_repoclones.ps1 - PoshCode</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
    <style>
        body {
            padding-top: 50px;
            padding-bottom: 20px;
        }
    </style>

    <link rel="openid2.provider" href="https://openid.stackexchange.com/openid/provider">
    <link rel="openid2.local_id" href="https://openid.stackexchange.com/user/b167be35-3674-4571-8142-df1f7dcfc268">
<!--
    <link rel="openid2.provider" href="https://www.google.com/accounts/o8/ud" />
    <link rel="openid2.local_id" href="https://profiles.google.com/+JoelBennett" />
-->
</head>
<body>
    <header>
    <nav class="navbar navbar-expand-sm fixed-top navbar-dark bg-dark">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="http://PoshCode.org/">PoshCode</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div id="navbarResponsive" class="collapse navbar-collapse navbar-responsive-collapse navbar-right">
                <ul class="nav navbar-nav nav-tabs ml-auto" data-tabs="tabs" id="tabs">
                    <li class="nav-item"><a class="nav-link active show" href="/Scripts" data-toggle="tab">Scripts</a></li>
                    <li class="nav-item"><a class="nav-link" href="/video" data-toggle="tab">Video Feed</a></li>
                </ul>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    </header>

    

<h1>init_repoclones.ps1</h1>
<h3><a href="//scripts/3633.ps1">download</a></h3>
<p>A script for creating clones of one or more svn repositories. It can only clone multiple repositories if they only differ by one substring (e.g. they all are svn repos on google code, sourceforge, codeplex, or some other forge.)</p>
<pre><code class="language-posh">&lt;#
.SYNOPSIS 
Makes a local copy of one or more remote svn repositories.
.DESCRIPTION 
Makes a local copy of one or more remote svn repositories.
.INPUTS 
None 
    You cannot pipe objects to init-repoclones.ps1 
.OUTPUTS
None
.EXAMPLE 

#&gt;
param (
    [string[]] $Repos = @('protobuf', 'mb-unit', 'opennode2'),
    [string] $RemoteRepoFormat = 'http://{0}.googlecode.com/svn/',
    [string] $LocalRepoBasePath = (Split-Path (Get-Variable MyInvocation).Value.MyCommand.Path),
    [switch] $DeleteExisting
)

# check that we have the svn executables we need
@('svnsync.exe', 'svnadmin.exe') | % {
    if (-not (Get-Command $_  -ErrorAction SilentlyContinue)) {
        Write-Host &quot;The executable `&quot;$($_)`&quot; is required by this script and was not found on the path.&quot;;
        exit 1;
    }
}

$Repos | % {
    $localRepoPath = (Join-Path $($LocalRepoBasePath) $_);
    $localRepoUri = ([uri]($localRepoPath)).AbsoluteUri;
    $remoteRepo = [string]::Format($RemoteRepoFormat, $_);

    if (Test-Path $localRepoPath) {
        if ($DeleteExisting) {
            Write-Host &quot;$($localRepoPath) already exists. Deleting . . .&quot;;
            rm -r -f $localRepoPath;
        }
        else {
            Write-Host &quot;$($localRepoPath) already exists. Skipping initialization . . .&quot;;
        }
    }
    else {
        Write-Host &quot;Cloning $($remoteRepo) into $($localRepoPath)&quot;
        &amp; svnadmin create $localRepoPath;
        [IO.File]::WriteAllText((Join-Path $localRepoPath 'hooks\pre-revprop-change.bat'), 'exit 0');
        &amp; svnsync init $localRepoUri $remoteRepo;
    }
    &amp; svnsync sync $localRepoUri $remoteRepo;

}
</code></pre>

    <footer class="blog-footer">
        <p>Â© Joel "Jaykul" Bennett 2018.</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="js/main.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59988721-1', 'auto');
      ga('send', 'pageview');

      $(function () {
          $('#contentTabs a:first').tab('show')
      })

    </script>
</body>
</html>